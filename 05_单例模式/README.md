# 05 - 单例模式 (Singleton Pattern)

> **核心思想**: 保证一个类仅有一个实例，并提供一个访问它的全局访问点。

## 📚 概念解析

单例模式（Singleton Pattern）是一种创建型设计模式，它确保一个类只有一个实例，并提供一个全局访问点来访问该实例。这在需要一个对象来协调整个系统中某些操作时非常有用，例如，管理共享资源，如数据库连接或文件。

**在 Python 中实现单例模式有多种方法**:
- **重写 `__new__` 方法**: 这是最常见和最直接的方法。
- **使用装饰器**: 一种优雅的、Pythonic 的方式。
- **使用元类**: 功能最强大，但也最复杂的方法。
- **模块级单例**: Python 模块在第一次导入时只会被初始化一次，因此可以利用这个特性来实现单例。

## 📂 代码示例

| 文件名                        | 描述                                                           |
| ----------------------------- | -------------------------------------------------------------- |
| `01_basic_singleton.py`       | 使用 `__new__` 方法实现一个基础的、线程安全的日志管理器。          |
| `02_decorator_singleton.py`   | 使用装饰器实现一个配置管理器单例。                             |
| `03_metaclass_singleton.py`   | 使用元类实现一个数据库连接池单例。                             |
| `04_module_singleton.py`      | 利用Python模块的特性实现一个简单的系统监控器单例。             |
| `05_real_world_examples.py`   | 更多真实世界的应用，如游戏设置、Web应用中的应用上下文等。      |

## ✅ 优点

- **保证唯一实例**: 确保一个类只有一个实例，避免了对同一共享资源产生多个实例。
- **全局访问点**: 提供了一个全局访问点，方便在代码的任何地方访问该实例。
- **节约系统资源**: 由于只有一个实例，因此可以节约内存和计算资源。

## ❌ 缺点

- **违反单一职责原则**: 单例类既要负责其业务逻辑，又要负责保证其唯一性。
- **难以测试**: 全局状态使得单元测试变得困难，因为测试用例之间可能会相互影响。
- **对继承不友好**: 在大多数实现中，单例类不能被继承。

## 🚀 如何运行

```bash
# 运行基础示例
python 05_单例模式/01_basic_singleton.py

# 运行装饰器单例示例
python 05_单例模式/02_decorator_singleton.py

# 运行元类单例示例
python 05_单例模式/03_metaclass_singleton.py

# 运行模块单例示例
python 05_单例模式/04_module_singleton.py

# 运行实际应用示例
python 05_单例模式/05_real_world_examples.py
```
