# 14 - 代理模式 (Proxy Pattern)

> **核心思想**: 为其他对象提供一种代理以控制对这个对象的访问。

## 📚 概念解析

代理模式（Proxy Pattern）是一种结构型设计模式，它创建了一个具有与原对象相同接口的新对象，从而可以在不改变原对象代码的情况下，向其添加一些额外的功能。这个新对象被称为“代理”。

**代理的常见类型**:
- **虚拟代理 (Virtual Proxy)**: 延迟加载。当一个对象的创建成本很高时，虚拟代理可以延迟其创建，直到真正需要它的时候。
- **保护代理 (Protection Proxy)**: 控制访问。代理可以检查调用者是否具有执行请求的权限。
- **远程代理 (Remote Proxy)**: 作为远程对象的本地代表。
- **缓存代理 (Caching Proxy)**: 缓存昂贵操作的结果。

**主要角色**:
- **主题 (Subject)**: 定义了真实主题和代理的共同接口。
- **真实主题 (Real Subject)**: 实现了业务逻辑的实际对象。
- **代理 (Proxy)**: 持有一个对真实主题的引用，并实现了与主题相同的接口。

## 📂 代码示例

| 文件名                     | 描述                                                           |
| -------------------------- | -------------------------------------------------------------- |
| `01_basic_proxy.py`        | 一个基础示例，演示了虚拟代理如何延迟加载一个昂贵的对象。         |
| `02_protection_proxy.py`   | 一个保护代理，根据用户角色控制对敏感文档的访问。               |
| `03_cache_proxy.py`        | 一个缓存代理，用于缓存数据库查询的结果，以提高性能。             |
| `04_remote_proxy.py`       | 一个远程代理，模拟了如何通过本地对象访问远程服务器上的服务。     |
| `05_real_world_examples.py`| 真实世界的应用，如ORM中的延迟加载、API网关中的权限控制等。     |

## ✅ 优点

- **控制访问**: 代理可以控制对真实对象的访问。
- **延迟加载**: 可以在需要时才实例化真实对象。
- **功能增强**: 可以在不修改真实对象的情况下，添加额外的功能（如日志、缓存）。
- **解耦**: 客户端代码与真实对象解耦。

## ❌ 缺点

- **增加了复杂性**: 引入了额外的类，增加了系统的复杂性。
- **可能引入性能开销**: 额外的间接层可能会带来轻微的性能下降。

## 🚀 如何运行

```bash
# 运行基础示例
python 14_代理模式/01_basic_proxy.py

# 运行保护代理示例
python 14_代理模式/02_protection_proxy.py

# 运行缓存代理示例
python 14_代理模式/03_cache_proxy.py

# 运行远程代理示例
python 14_代理模式/04_remote_proxy.py

# 运行实际应用示例
python 14_代理模式/05_real_world_examples.py
```
