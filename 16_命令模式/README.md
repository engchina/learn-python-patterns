# 16 - 命令模式 (Command Pattern)

> **核心思想**: 将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可撤销的操作。

## 📚 概念解析

命令模式（Command Pattern）是一种行为设计模式，它将一个请求或简单的操作封装到一个对象中。这种封装允许你将客户端的请求参数化，延迟请求的执行，将请求放入队列，以及支持可撤销的操作。

**主要角色**:
- **命令 (Command)**: 声明了一个执行操作的接口，通常包含 `execute()` 方法。
- **具体命令 (Concrete Command)**: 实现了命令接口，并持有一个接收者对象的引用。它调用接收者的一个或多个操作来实现 `execute()`。
- **调用者 (Invoker)**: 持有一个命令对象，并请求该命令执行请求。
- **接收者 (Receiver)**: 知道如何实施与执行一个请求相关的操作。任何类都可能作为一个接收者。
- **客户端 (Client)**: 创建一个具体命令对象并设置其接收者。

## 📂 代码示例

| 文件名                     | 描述                                                           |
| -------------------------- | -------------------------------------------------------------- |
| `01_basic_command.py`      | 一个智能家居遥控器，演示了如何将“开灯”、“关灯”等操作封装成命令对象，并支持撤销。 |
| `02_text_editor.py`        | 一个文本编辑器，实现了完整的撤销/重做功能。                    |
| `03_macro_command.py`      | 演示了宏命令，即一个命令可以包含一系列其他命令。               |
| `04_queue_command.py`      | 一个命令队列，用于异步或延迟执行命令。                         |
| `05_real_world_examples.py`| 真实世界的应用，如数据库事务、游戏录制和回放等。               |

## ✅ 优点

- **解耦**: 将调用操作的对象与知道如何执行操作的对象解耦。
- **可扩展性**: 可以很容易地添加新的命令，无需改变现有类。
- **支持撤销和重做**: 可以通过保存命令历史来实现。
- **支持宏命令**: 可以将多个命令组合成一个复合命令。

## ❌ 缺点

- **增加了类的数量**: 系统中可能会增加大量的命令类。
- **代码可能变得复杂**: 引入了许多额外的类，可能会使代码更难理解。

## 🚀 如何运行

```bash
# 运行基础示例
python 16_命令模式/01_basic_command.py

# 运行文本编辑器示例
python 16_命令模式/02_text_editor.py

# 运行宏命令示例
python 16_命令模式/03_macro_command.py

# 运行命令队列示例
python 16_命令模式/04_queue_command.py

# 运行实际应用示例
python 16_命令模式/05_real_world_examples.py
```
