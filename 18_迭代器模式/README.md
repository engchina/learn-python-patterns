# 18 - 迭代器模式 (Iterator Pattern)

> **核心思想**: 提供一种方法顺序访问一个聚合对象中各个元素, 而又无须暴露该对象的内部表示。

## 📚 概念解析

迭代器模式（Iterator Pattern）是一种行为设计模式，它将集合对象的遍历行为抽取出来，封装到一个迭代器对象中。这使得你可以在不暴露集合内部结构的情况下，使用相同的遍历接口来访问不同类型的集合。

在 Python 中，迭代器模式是内置的，并且是语言的核心部分。任何实现了 `__iter__` 方法的对象都是**可迭代的 (Iterable)**。`__iter__` 方法应返回一个**迭代器 (Iterator)** 对象。迭代器对象则需要实现 `__next__` 方法，用于返回序列中的下一个元素，以及一个 `__iter__` 方法，用于返回它自身。当没有更多元素时，`__next__` 方法应引发 `StopIteration` 异常。

**主要角色**:
- **可迭代对象 (Iterable)**: 实现了 `__iter__()` 方法的对象。
- **迭代器 (Iterator)**: 实现了 `__iter__()` 和 `__next__()` 方法的对象。

## 📂 代码示例

| 文件名                        | 描述                                                           |
| ----------------------------- | -------------------------------------------------------------- |
| `01_basic_iterator.py`        | 一个基础的图书集合，演示了如何手动实现迭代器协议。             |
| `02_data_iterators.py`        | 演示了如何为真实世界的数据源（如CSV文件、API分页）创建迭代器。   |
| `03_filter_iterators.py`      | 展示了如何创建可以过滤和转换数据的迭代器，形成数据处理管道。   |
| `04_tree_iterators.py`        | 为树形结构（如文件系统）实现了深度优先和广度优先遍历的迭代器。 |
| `05_generators_vs_iterators.py`| 对比了迭代器和生成器，展示了如何用生成器更简洁地实现迭代器。   |
| `06_real_world_examples.py`   | 真实世界的应用，如网络爬虫、日志分析等。                       |

## ✅ 优点

- **单一职责**: 遍历算法和数据结构分离。
- **统一接口**: 为不同的数据结构提供统一的遍历接口。
- **支持并行遍历**: 可以同时对同一个数据结构进行多个遍历。
- **内存效率**: 迭代器是惰性求值的，一次只处理一个元素，非常适合处理大数据集。

## ❌ 缺点

- **增加了复杂性**: 对于简单的集合，手动实现迭代器可能会比直接遍历更复杂。

## 🚀 如何运行

```bash
# 运行基础示例
python 18_迭代器模式/01_basic_iterator.py

# 运行数据迭代器示例
python 18_迭代器模式/02_data_iterators.py

# 运行过滤迭代器示例
python 18_迭代器模式/03_filter_iterators.py

# 运行树形迭代器示例
python 18_迭代器模式/04_tree_iterators.py

# 运行生成器对比示例
python 18_迭代器模式/05_generators_vs_iterators.py

# 运行实际应用示例
python 18_迭代器模式/06_real_world_examples.py
```
